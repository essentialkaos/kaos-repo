# Bibop recipe for libnetfilter_queue
# See more: https://kaos.sh/bibop

pkg libnetfilter_queue libnetfilter_queue-devel

fast-finish yes

var lib_linking_flags "-lnetfilter_queue -lnfnetlink"

command "-" "Check shared libs"
  lib-loaded libnetfilter_queue.so.*

command "-" "Check headers"
  lib-header libnetfilter_queue

command "-" "Check pkg-config"
  lib-config libnetfilter_queue

command "-" "Check symbols exported by libnetfilter_queue.so"
  lib-exported libnetfilter_queue.so nfq_bind_pf
  lib-exported libnetfilter_queue.so nfq_close
  lib-exported libnetfilter_queue.so nfq_create_queue
  lib-exported libnetfilter_queue.so nfq_destroy_queue
  lib-exported libnetfilter_queue.so nfq_fd
  lib-exported libnetfilter_queue.so nfq_get_gid
  lib-exported libnetfilter_queue.so nfq_get_indev
  lib-exported libnetfilter_queue.so nfq_get_indev_name
  lib-exported libnetfilter_queue.so nfq_get_msg_packet_hdr
  lib-exported libnetfilter_queue.so nfq_get_nfmark
  lib-exported libnetfilter_queue.so nfq_get_outdev
  lib-exported libnetfilter_queue.so nfq_get_outdev_name
  lib-exported libnetfilter_queue.so nfq_get_packet_hw
  lib-exported libnetfilter_queue.so nfq_get_payload
  lib-exported libnetfilter_queue.so nfq_get_physindev
  lib-exported libnetfilter_queue.so nfq_get_physindev_name
  lib-exported libnetfilter_queue.so nfq_get_physoutdev
  lib-exported libnetfilter_queue.so nfq_get_physoutdev_name
  lib-exported libnetfilter_queue.so nfq_get_secctx
  lib-exported libnetfilter_queue.so nfq_get_timestamp
  lib-exported libnetfilter_queue.so nfq_get_uid
  lib-exported libnetfilter_queue.so nfq_handle_packet
  lib-exported libnetfilter_queue.so nfq_ip6_get_hdr
  lib-exported libnetfilter_queue.so nfq_ip6_set_transport_header
  lib-exported libnetfilter_queue.so nfq_ip6_snprintf
  lib-exported libnetfilter_queue.so nfq_ip_get_hdr
  lib-exported libnetfilter_queue.so nfq_ip_mangle
  lib-exported libnetfilter_queue.so nfq_ip_set_checksum
  lib-exported libnetfilter_queue.so nfq_ip_set_transport_header
  lib-exported libnetfilter_queue.so nfq_ip_snprintf
  lib-exported libnetfilter_queue.so nfq_nfnlh
  lib-exported libnetfilter_queue.so nfq_nlmsg_cfg_put_cmd
  lib-exported libnetfilter_queue.so nfq_nlmsg_cfg_put_params
  lib-exported libnetfilter_queue.so nfq_nlmsg_cfg_put_qmaxlen
  lib-exported libnetfilter_queue.so nfq_nlmsg_parse
  lib-exported libnetfilter_queue.so nfq_nlmsg_verdict_put
  lib-exported libnetfilter_queue.so nfq_nlmsg_verdict_put_mark
  lib-exported libnetfilter_queue.so nfq_nlmsg_verdict_put_pkt
  lib-exported libnetfilter_queue.so nfq_open
  lib-exported libnetfilter_queue.so nfq_open_nfnl
  lib-exported libnetfilter_queue.so nfq_set_mode
  lib-exported libnetfilter_queue.so nfq_set_queue_flags
  lib-exported libnetfilter_queue.so nfq_set_queue_maxlen
  lib-exported libnetfilter_queue.so nfq_set_verdict
  lib-exported libnetfilter_queue.so nfq_set_verdict2
  lib-exported libnetfilter_queue.so nfq_set_verdict_batch
  lib-exported libnetfilter_queue.so nfq_set_verdict_batch2
  lib-exported libnetfilter_queue.so nfq_set_verdict_mark
  lib-exported libnetfilter_queue.so nfq_snprintf_xml
  lib-exported libnetfilter_queue.so nfq_tcp_compute_checksum_ipv4
  lib-exported libnetfilter_queue.so nfq_tcp_compute_checksum_ipv6
  lib-exported libnetfilter_queue.so nfq_tcp_get_hdr
  lib-exported libnetfilter_queue.so nfq_tcp_get_payload
  lib-exported libnetfilter_queue.so nfq_tcp_get_payload_len
  lib-exported libnetfilter_queue.so nfq_tcp_mangle_ipv4
  lib-exported libnetfilter_queue.so nfq_tcp_snprintf
  lib-exported libnetfilter_queue.so nfq_udp_compute_checksum_ipv4
  lib-exported libnetfilter_queue.so nfq_udp_compute_checksum_ipv6
  lib-exported libnetfilter_queue.so nfq_udp_get_hdr
  lib-exported libnetfilter_queue.so nfq_udp_get_payload
  lib-exported libnetfilter_queue.so nfq_udp_get_payload_len
  lib-exported libnetfilter_queue.so nfq_udp_mangle_ipv4
  lib-exported libnetfilter_queue.so nfq_udp_snprintf
  lib-exported libnetfilter_queue.so nfq_unbind_pf
  lib-exported libnetfilter_queue.so pktb_alloc
  lib-exported libnetfilter_queue.so pktb_data
  lib-exported libnetfilter_queue.so pktb_free
  lib-exported libnetfilter_queue.so pktb_len
  lib-exported libnetfilter_queue.so pktb_mac_header
  lib-exported libnetfilter_queue.so pktb_mangle
  lib-exported libnetfilter_queue.so pktb_mangled
  lib-exported libnetfilter_queue.so pktb_network_header
  lib-exported libnetfilter_queue.so pktb_pull
  lib-exported libnetfilter_queue.so pktb_push
  lib-exported libnetfilter_queue.so pktb_put
  lib-exported libnetfilter_queue.so pktb_tailroom
  lib-exported libnetfilter_queue.so pktb_transport_header
  lib-exported libnetfilter_queue.so pktb_trim

command "gcc -o test_bin {lib_linking_flags} test.c" "Compile binary"
  exit 0
  exist test_bin

+command "./test_bin" "Execute built binary"
  exit 0
