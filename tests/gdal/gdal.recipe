# Bibop recipe for GDAL
# See more: https://kaos.sh/bibop

pkg gdal gdal-devel gdal-perl gdal-python

fast-finish yes

command "-" "Check apps"
  app gdal-config
  app gdal_grid
  app gdal_rasterize
  app gdal_translate
  app gdaladdo
  app gdalbuildvrt
  app gdaldem
  app gdalenhance
  app gdalinfo
  app gdallocationinfo
  app gdalmanage 
  app gdalserver
  app gdalsrsinfo
  app gdaltindex
  app gdaltransform
  app gdalwarp
  app nearblack
  app ogr2ogr
  app ogrinfo
  app ogrlineref
  app ogrtindex
  app testepsg

command "-" "Check Perl apps"
  app gdal_calc.dox
  app gdal_edit.dox
  app gdal_polygonize.dox
  app gdal_proximity.dox
  app gdalcompare.dox
  app gdalmove.dox

command "-" "Check Python apps"
  app epsg_tr.py
  app esri2wkt.py
  app gcps2vec.py
  app gcps2wld.py
  app gdal2tiles.py
  app gdal2xyz.py
  app gdal_auth.py
  app gdal_calc.py
  app gdal_contour
  app gdal_edit.py
  app gdal_fillnodata.py
  app gdal_merge.py
  app gdal_polygonize.py
  app gdal_proximity.py
  app gdal_retile.py
  app gdal_sieve.py
  app gdalchksum.py 
  app gdalcompare.py
  app gdalident.py
  app gdalimport.py
  app gdalmove.py
  app mkgraticule.py
  app pct2rgb.py
  app rgb2pct.py

command "-" "Check shared libs"
  lib-loaded libgdal.so.*

command "-" "Check headers"
  lib-header gdal

command "-" "Check pkg-config"
  lib-config gdal

command "-" "Check Python 2 installation"
  exist {PYTHON2_SITEARCH}/osgeo
  dir {PYTHON2_SITEARCH}/osgeo

  exist {PYTHON2_SITEARCH}/osgeo/__init__.py

  python-module osgeo
