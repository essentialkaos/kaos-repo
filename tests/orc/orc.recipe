# Bibop recipe for orc
# See more: https://kaos.sh/bibop

pkg orc orc-compiler orc-devel orc-doc

fast-finish yes

var lib_linking_flags "-lorc-0.4"

command "-" "Check environment"
  app orc-bugreport
  app orcc

command "-" "Check shared libs"
  lib-loaded liborc-0.4.so.*

command "-" "Check headers"
  lib-header orc-0.4

command "-" "Check pkg-config"
  lib-config orc-0.4

command "-" "Check symbols exported by liborc-0.4.so"
  lib-exported liborc-0.4.so orc_arm_add_fixup
  lib-exported liborc-0.4.so orc_arm_cond_name
  lib-exported liborc-0.4.so orc_arm_do_fixups
  lib-exported liborc-0.4.so orc_arm_emit
  lib-exported liborc-0.4.so orc_arm_emit_add
  lib-exported liborc-0.4.so orc_arm_emit_add_imm
  lib-exported liborc-0.4.so orc_arm_emit_align
  lib-exported liborc-0.4.so orc_arm_emit_and_imm
  lib-exported liborc-0.4.so orc_arm_emit_asr_imm
  lib-exported liborc-0.4.so orc_arm_emit_branch
  lib-exported liborc-0.4.so orc_arm_emit_bx_lr
  lib-exported liborc-0.4.so orc_arm_emit_cmp
  lib-exported liborc-0.4.so orc_arm_emit_cmp_imm
  lib-exported liborc-0.4.so orc_arm_emit_data
  lib-exported liborc-0.4.so orc_arm_emit_dp
  lib-exported liborc-0.4.so orc_arm_emit_label
  lib-exported liborc-0.4.so orc_arm_emit_load_imm
  lib-exported liborc-0.4.so orc_arm_emit_load_reg
  lib-exported liborc-0.4.so orc_arm_emit_lsl_imm
  lib-exported liborc-0.4.so orc_arm_emit_mov
  lib-exported liborc-0.4.so orc_arm_emit_nop
  lib-exported liborc-0.4.so orc_arm_emit_par
  lib-exported liborc-0.4.so orc_arm_emit_pkh
  lib-exported liborc-0.4.so orc_arm_emit_pop
  lib-exported liborc-0.4.so orc_arm_emit_push
  lib-exported liborc-0.4.so orc_arm_emit_rv
  lib-exported liborc-0.4.so orc_arm_emit_sat
  lib-exported liborc-0.4.so orc_arm_emit_store_reg
  lib-exported liborc-0.4.so orc_arm_emit_sub
  lib-exported liborc-0.4.so orc_arm_emit_sub_imm
  lib-exported liborc-0.4.so orc_arm_emit_xt
  lib-exported liborc-0.4.so orc_arm_flush_cache
  lib-exported liborc-0.4.so orc_arm_loadw
  lib-exported liborc-0.4.so orc_arm_reg_name
  lib-exported liborc-0.4.so orc_bytecode_free
  lib-exported liborc-0.4.so orc_bytecode_from_program
  lib-exported liborc-0.4.so orc_bytecode_new
  lib-exported liborc-0.4.so orc_bytecode_parse_function
  lib-exported liborc-0.4.so orc_code_allocate_codemem
  lib-exported liborc-0.4.so orc_code_free
  lib-exported liborc-0.4.so orc_code_new
  lib-exported liborc-0.4.so orc_compiler_append_code
  lib-exported liborc-0.4.so orc_compiler_error
  lib-exported liborc-0.4.so orc_compiler_flag_check
  lib-exported liborc-0.4.so orc_compiler_get_constant
  lib-exported liborc-0.4.so orc_compiler_get_constant_long
  lib-exported liborc-0.4.so orc_compiler_get_constant_reg
  lib-exported liborc-0.4.so orc_compiler_get_temp_constant
  lib-exported liborc-0.4.so orc_compiler_get_temp_reg
  lib-exported liborc-0.4.so orc_compiler_label_new
  lib-exported liborc-0.4.so orc_compiler_try_get_constant_long
  lib-exported liborc-0.4.so orc_debug_get_level
  lib-exported liborc-0.4.so orc_debug_print
  lib-exported liborc-0.4.so orc_debug_set_level
  lib-exported liborc-0.4.so orc_debug_set_print_function
  lib-exported liborc-0.4.so orc_executor_emulate
  lib-exported liborc-0.4.so orc_executor_free
  lib-exported liborc-0.4.so orc_executor_get_accumulator
  lib-exported liborc-0.4.so orc_executor_get_accumulator_str
  lib-exported liborc-0.4.so orc_executor_new
  lib-exported liborc-0.4.so orc_executor_run
  lib-exported liborc-0.4.so orc_executor_run_backup
  lib-exported liborc-0.4.so orc_executor_set_array
  lib-exported liborc-0.4.so orc_executor_set_array_str
  lib-exported liborc-0.4.so orc_executor_set_m
  lib-exported liborc-0.4.so orc_executor_set_n
  lib-exported liborc-0.4.so orc_executor_set_param
  lib-exported liborc-0.4.so orc_executor_set_param_double
  lib-exported liborc-0.4.so orc_executor_set_param_float
  lib-exported liborc-0.4.so orc_executor_set_param_int64
  lib-exported liborc-0.4.so orc_executor_set_param_str
  lib-exported liborc-0.4.so orc_executor_set_program
  lib-exported liborc-0.4.so orc_executor_set_stride
  lib-exported liborc-0.4.so orc_get_cpu_family_model_stepping
  lib-exported liborc-0.4.so orc_get_cpu_name
  lib-exported liborc-0.4.so orc_get_data_cache_sizes
  lib-exported liborc-0.4.so orc_global_mutex_lock
  lib-exported liborc-0.4.so orc_global_mutex_unlock
  lib-exported liborc-0.4.so orc_init
  lib-exported liborc-0.4.so orc_memcpy
  lib-exported liborc-0.4.so orc_memset
  lib-exported liborc-0.4.so orc_mips_do_fixups
  lib-exported liborc-0.4.so orc_mips_emit_add
  lib-exported liborc-0.4.so orc_mips_emit_addi
  lib-exported liborc-0.4.so orc_mips_emit_addiu
  lib-exported liborc-0.4.so orc_mips_emit_addq_s_ph
  lib-exported liborc-0.4.so orc_mips_emit_addu
  lib-exported liborc-0.4.so orc_mips_emit_adduh_r_qb
  lib-exported liborc-0.4.so orc_mips_emit_addu_ph
  lib-exported liborc-0.4.so orc_mips_emit_addu_qb
  lib-exported liborc-0.4.so orc_mips_emit_align
  lib-exported liborc-0.4.so orc_mips_emit_and
  lib-exported liborc-0.4.so orc_mips_emit_andi
  lib-exported liborc-0.4.so orc_mips_emit_append
  lib-exported liborc-0.4.so orc_mips_emit_cmp_lt_ph
  lib-exported liborc-0.4.so orc_mips_emit_conditional_branch
  lib-exported liborc-0.4.so orc_mips_emit_conditional_branch_with_offset
  lib-exported liborc-0.4.so orc_mips_emit_extr_s_h
  lib-exported liborc-0.4.so orc_mips_emit_jr
  lib-exported liborc-0.4.so orc_mips_emit_label
  lib-exported liborc-0.4.so orc_mips_emit_lb
  lib-exported liborc-0.4.so orc_mips_emit_lbu
  lib-exported liborc-0.4.so orc_mips_emit_lh
  lib-exported liborc-0.4.so orc_mips_emit_lui
  lib-exported liborc-0.4.so orc_mips_emit_lw
  lib-exported liborc-0.4.so orc_mips_emit_lwl
  lib-exported liborc-0.4.so orc_mips_emit_lwr
  lib-exported liborc-0.4.so orc_mips_emit_move
  lib-exported liborc-0.4.so orc_mips_emit_movn
  lib-exported liborc-0.4.so orc_mips_emit_mtlo
  lib-exported liborc-0.4.so orc_mips_emit_mul
  lib-exported liborc-0.4.so orc_mips_emit_mul_ph
  lib-exported liborc-0.4.so orc_mips_emit_nop
  lib-exported liborc-0.4.so orc_mips_emit_or
  lib-exported liborc-0.4.so orc_mips_emit_ori
  lib-exported liborc-0.4.so orc_mips_emit_packrl_ph
  lib-exported liborc-0.4.so orc_mips_emit_pick_ph
  lib-exported liborc-0.4.so orc_mips_emit_preceu_ph_qbr
  lib-exported liborc-0.4.so orc_mips_emit_precr_qb_ph
  lib-exported liborc-0.4.so orc_mips_emit_precrq_qb_ph
  lib-exported liborc-0.4.so orc_mips_emit_pref
  lib-exported liborc-0.4.so orc_mips_emit_prepend
  lib-exported liborc-0.4.so orc_mips_emit_repl_ph
  lib-exported liborc-0.4.so orc_mips_emit_replv_ph
  lib-exported liborc-0.4.so orc_mips_emit_replv_qb
  lib-exported liborc-0.4.so orc_mips_emit_sb
  lib-exported liborc-0.4.so orc_mips_emit_seh
  lib-exported liborc-0.4.so orc_mips_emit_sh
  lib-exported liborc-0.4.so orc_mips_emit_shll_ph
  lib-exported liborc-0.4.so orc_mips_emit_shra_ph
  lib-exported liborc-0.4.so orc_mips_emit_shrl_ph
  lib-exported liborc-0.4.so orc_mips_emit_sll
  lib-exported liborc-0.4.so orc_mips_emit_slt
  lib-exported liborc-0.4.so orc_mips_emit_sra
  lib-exported liborc-0.4.so orc_mips_emit_srl
  lib-exported liborc-0.4.so orc_mips_emit_sub
  lib-exported liborc-0.4.so orc_mips_emit_subq_ph
  lib-exported liborc-0.4.so orc_mips_emit_subq_s_ph
  lib-exported liborc-0.4.so orc_mips_emit_subu_ph
  lib-exported liborc-0.4.so orc_mips_emit_subu_qb
  lib-exported liborc-0.4.so orc_mips_emit_sw
  lib-exported liborc-0.4.so orc_mips_emit_swl
  lib-exported liborc-0.4.so orc_mips_emit_swr
  lib-exported liborc-0.4.so orc_mips_emit_wsbh
  lib-exported liborc-0.4.so orc_mmx_get_cpu_flags
  lib-exported liborc-0.4.so orc_mmx_load_constant
  lib-exported liborc-0.4.so orc_neon_emit_loadib
  lib-exported liborc-0.4.so orc_neon_emit_loadil
  lib-exported liborc-0.4.so orc_neon_emit_loadiw
  lib-exported liborc-0.4.so orc_neon_emit_loadpb
  lib-exported liborc-0.4.so orc_neon_emit_loadpl
  lib-exported liborc-0.4.so orc_neon_emit_loadpw
  lib-exported liborc-0.4.so orc_neon_preload
  lib-exported liborc-0.4.so orc_neon_reg_name
  lib-exported liborc-0.4.so orc_neon_reg_name_quad
  lib-exported liborc-0.4.so orc_once_mutex_lock
  lib-exported liborc-0.4.so orc_once_mutex_unlock
  lib-exported liborc-0.4.so orc_opcode_find_by_name
  lib-exported liborc-0.4.so orc_opcode_init
  lib-exported liborc-0.4.so orc_opcode_register_static
  lib-exported liborc-0.4.so orc_opcode_set_find_by_name
  lib-exported liborc-0.4.so orc_opcode_set_get
  lib-exported liborc-0.4.so orc_opcode_set_get_nth
  lib-exported liborc-0.4.so orc_parse
  lib-exported liborc-0.4.so orc_parse_full
  lib-exported liborc-0.4.so orc_parse_get_init_function
  lib-exported liborc-0.4.so orc_powerpc_flush_cache
  lib-exported liborc-0.4.so orc_program_add_accumulator
  lib-exported liborc-0.4.so orc_program_add_constant
  lib-exported liborc-0.4.so orc_program_add_constant_double
  lib-exported liborc-0.4.so orc_program_add_constant_float
  lib-exported liborc-0.4.so orc_program_add_constant_int64
  lib-exported liborc-0.4.so orc_program_add_constant_str
  lib-exported liborc-0.4.so orc_program_add_destination
  lib-exported liborc-0.4.so orc_program_add_destination_full
  lib-exported liborc-0.4.so orc_program_add_parameter
  lib-exported liborc-0.4.so orc_program_add_parameter_double
  lib-exported liborc-0.4.so orc_program_add_parameter_float
  lib-exported liborc-0.4.so orc_program_add_parameter_int64
  lib-exported liborc-0.4.so orc_program_add_source
  lib-exported liborc-0.4.so orc_program_add_source_full
  lib-exported liborc-0.4.so orc_program_add_temporary
  lib-exported liborc-0.4.so orc_program_append
  lib-exported liborc-0.4.so orc_program_append_2
  lib-exported liborc-0.4.so orc_program_append_dds_str
  lib-exported liborc-0.4.so orc_program_append_ds
  lib-exported liborc-0.4.so orc_program_append_ds_str
  lib-exported liborc-0.4.so orc_program_append_str
  lib-exported liborc-0.4.so orc_program_append_str_2
  lib-exported liborc-0.4.so orc_program_compile
  lib-exported liborc-0.4.so orc_program_compile_for_target
  lib-exported liborc-0.4.so orc_program_compile_full
  lib-exported liborc-0.4.so orc_program_dup_temporary
  lib-exported liborc-0.4.so orc_program_find_var_by_name
  lib-exported liborc-0.4.so orc_program_free
  lib-exported liborc-0.4.so orc_program_get_asm_code
  lib-exported liborc-0.4.so orc_program_get_error
  lib-exported liborc-0.4.so orc_program_get_max_accumulator_size
  lib-exported liborc-0.4.so orc_program_get_max_array_size
  lib-exported liborc-0.4.so orc_program_get_name
  lib-exported liborc-0.4.so orc_program_new
  lib-exported liborc-0.4.so orc_program_new_as
  lib-exported liborc-0.4.so orc_program_new_ass
  lib-exported liborc-0.4.so orc_program_new_ds
  lib-exported liborc-0.4.so orc_program_new_dss
  lib-exported liborc-0.4.so orc_program_new_from_static_bytecode
  lib-exported liborc-0.4.so orc_program_reset
  lib-exported liborc-0.4.so orc_program_set_2d
  lib-exported liborc-0.4.so orc_program_set_backup_function
  lib-exported liborc-0.4.so orc_program_set_backup_name
  lib-exported liborc-0.4.so orc_program_set_constant_m
  lib-exported liborc-0.4.so orc_program_set_constant_n
  lib-exported liborc-0.4.so orc_program_set_error
  lib-exported liborc-0.4.so orc_program_set_line
  lib-exported liborc-0.4.so orc_program_set_name
  lib-exported liborc-0.4.so orc_program_set_n_maximum
  lib-exported liborc-0.4.so orc_program_set_n_minimum
  lib-exported liborc-0.4.so orc_program_set_n_multiple
  lib-exported liborc-0.4.so orc_program_set_sampling_type
  lib-exported liborc-0.4.so orc_program_set_type_name
  lib-exported liborc-0.4.so orc_program_set_var_alignment
  lib-exported liborc-0.4.so orc_program_take_code
  lib-exported liborc-0.4.so orc_rule_register
  lib-exported liborc-0.4.so orc_rule_set_new
  lib-exported liborc-0.4.so orc_sse_get_cpu_flags
  lib-exported liborc-0.4.so orc_sse_load_constant
  lib-exported liborc-0.4.so orc_sse_restore_mxcsr
  lib-exported liborc-0.4.so orc_sse_set_mxcsr
  lib-exported liborc-0.4.so orc_target_c_get_typedefs
  lib-exported liborc-0.4.so orc_target_get_asm_preamble
  lib-exported liborc-0.4.so orc_target_get_by_name
  lib-exported liborc-0.4.so orc_target_get_default
  lib-exported liborc-0.4.so orc_target_get_default_flags
  lib-exported liborc-0.4.so orc_target_get_flag_name
  lib-exported liborc-0.4.so orc_target_get_name
  lib-exported liborc-0.4.so orc_target_get_preamble
  lib-exported liborc-0.4.so orc_target_get_rule
  lib-exported liborc-0.4.so orc_target_register
  lib-exported liborc-0.4.so orc_version_string
  lib-exported liborc-0.4.so orc_x86_assemble_copy
  lib-exported liborc-0.4.so orc_x86_assemble_copy_check
  lib-exported liborc-0.4.so orc_x86_calculate_offsets
  lib-exported liborc-0.4.so orc_x86_do_fixups
  lib-exported liborc-0.4.so orc_x86_emit_add_imm_reg
  lib-exported liborc-0.4.so orc_x86_emit_add_reg_reg_shift
  lib-exported liborc-0.4.so orc_x86_emit_cmp_imm_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_cmp_imm_reg
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_align
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_branch
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_imm
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_imm_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_imm_reg
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_label
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_load_memindex
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_load_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_memoffset_reg
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_none
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_reg_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_reg_memoffset_8
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_reg_memoffset_s
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_size
  lib-exported liborc-0.4.so orc_x86_emit_cpuinsn_store_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_dec_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_epilogue
  lib-exported liborc-0.4.so orc_x86_emit_modrm_memindex
  lib-exported liborc-0.4.so orc_x86_emit_modrm_memindex2
  lib-exported liborc-0.4.so orc_x86_emit_modrm_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_modrm_memoffset_old
  lib-exported liborc-0.4.so orc_x86_emit_modrm_reg
  lib-exported liborc-0.4.so orc_x86_emit_mov_memindex_mmx
  lib-exported liborc-0.4.so orc_x86_emit_mov_memindex_sse
  lib-exported liborc-0.4.so orc_x86_emit_mov_memoffset_mmx
  lib-exported liborc-0.4.so orc_x86_emit_mov_memoffset_reg
  lib-exported liborc-0.4.so orc_x86_emit_mov_memoffset_sse
  lib-exported liborc-0.4.so orc_x86_emit_mov_mmx_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_mov_reg_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_mov_sse_memoffset
  lib-exported liborc-0.4.so orc_x86_emit_pop
  lib-exported liborc-0.4.so orc_x86_emit_prologue
  lib-exported liborc-0.4.so orc_x86_emit_push
  lib-exported liborc-0.4.so orc_x86_emit_rep_movs
  lib-exported liborc-0.4.so orc_x86_emit_rex
  lib-exported liborc-0.4.so orc_x86_get_output_insn
  lib-exported liborc-0.4.so orc_x86_get_regname
  lib-exported liborc-0.4.so orc_x86_get_regname_16
  lib-exported liborc-0.4.so orc_x86_get_regname_64
  lib-exported liborc-0.4.so orc_x86_get_regname_8
  lib-exported liborc-0.4.so orc_x86_get_regname_mmx
  lib-exported liborc-0.4.so orc_x86_get_regname_ptr
  lib-exported liborc-0.4.so orc_x86_get_regname_size
  lib-exported liborc-0.4.so orc_x86_get_regname_sse
  lib-exported liborc-0.4.so orc_x86_get_regnum
  lib-exported liborc-0.4.so orc_x86_output_insns

command "gcc -o test_bin {lib_linking_flags} test.c" "Compile binary"
  exit 0
  exist test_bin

+command "./test_bin" "Execute built binary"
  exit 0
