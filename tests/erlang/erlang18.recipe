# Bibop recipe for Erlang 18
# See more: https://github.com/essentialkaos/bibop

pkg erlang18

var erts_version 7.3.1.6
var bin_dir      /usr/lib64/erlang/erts-{erts_version}/bin

command "-" "Check environment"
  app epmd
  app erl
  app erlc
  app escript

command "-" "Check zlib linking"
  !lib-linked {bin_dir}/beam libz.so.1

command "erl -compile test" "Compile basic script"
  exit 0
  exist test.beam

command "erl -noshell -s test main -s init stop" "Execute basic script"
  exit 0
  output-contains "ERLANG WORKS"
