# Bibop recipe for libconfig
# See more: https://kaos.sh/bibop

pkg libconfig libconfig-devel

fast-finish yes

var libc_linking_flags "-lconfig"
var libcpp_linking_flags "-lconfig++"

command "-" "Check shared libs"
  lib-loaded libconfig++.so.*
  lib-loaded libconfig.so.*

command "-" "Check headers"
  lib-header libconfig.h
  lib-header libconfig.h++

command "-" "Check pkg-config"
  lib-config libconfig
  lib-config libconfig++

command "gcc -o test_c_bin {libc_linking_flags} test.c" "Compile binary"
  exit 0
  exist test_c_bin

+command "./test_c_bin" "Execute built binary"
  exit 0

command "gcc -o test_cc_bin {libcpp_linking_flags} test.cc" "Compile binary"
  exit 0
  exist test_cc_bin

+command "./test_cc_bin" "Execute built binary"
  exit 0
