# Bibop recipe for snzip
# See more: https://kaos.sh/bibop

pkg snzip

var test_string TEST1234!@$test6789

command "-" "Check binary"
  app snzip

command "-" "Check framing2 format"
  exist test.txt

+command "snzip -t framing2 -k test.txt" "Compress to framing2 format"
  exit 0 
  exist test.txt.sz

+command "snzip -c -d -t framing2 -k test.txt.sz" "Decompress framing2 format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.sz

command "-" "Check hadoop-snappy format"
  exist test.txt

+command "snzip -t hadoop-snappy -k test.txt" "Compress to hadoop-snappy format"
  exit 0 
  exist test.txt.snappy

+command "snzip -c -d -t hadoop-snappy -k test.txt.snappy" "Decompress hadoop-snappy format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.snappy

command "-" "Check iwa format"
  exist test.txt

+command "snzip -t iwa -k test.txt" "Compress to iwa format"
  exit 0 
  exist test.txt.iwa

+command "snzip -c -d -t iwa -k test.txt.iwa" "Decompress iwa format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.iwa

command "-" "Check framing format"
  exist test.txt

+command "snzip -t framing -k test.txt" "Compress to framing format"
  exit 0 
  exist test.txt.sz

+command "snzip -c -d -t framing -k test.txt.sz" "Decompress framing format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.sz

command "-" "Check snzip format"
  exist test.txt

+command "snzip -t snzip -k test.txt" "Compress to snzip format"
  exit 0 
  exist test.txt.snz

+command "snzip -c -d -t snzip -k test.txt.snz" "Decompress snzip format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.snz

command "-" "Check snappy-java format"
  exist test.txt

+command "snzip -t snappy-java -k test.txt" "Compress to snappy-java format"
  exit 0 
  exist test.txt.snappy

+command "snzip -c -d -t snappy-java -k test.txt.snappy" "Decompress snappy-java format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.snappy

command "-" "Check snappy-in-java format"
  exist test.txt

+command "snzip -t snappy-in-java -k test.txt" "Compress to snappy-in-java format"
  exit 0 
  exist test.txt.snappy

+command "snzip -c -d -t snappy-in-java -k test.txt.snappy" "Decompress snappy-in-java format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.snappy

command "-" "Check comment-43 format"
  exist test.txt

+command "snzip -t comment-43 -k test.txt" "Compress to comment-43 format"
  exit 0 
  exist test.txt.snappy

+command "snzip -c -d -t comment-43 -k test.txt.snappy" "Decompress comment-43 format"
  exit 0
  output-contains "{test_string}"
  remove test.txt.snappy
