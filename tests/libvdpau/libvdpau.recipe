# Bibop recipe for libvdpau
# See more: https://kaos.sh/bibop

pkg libvdpau libvdpau-devel libvdpau-docs

fast-finish yes

var lib_linking_flags "-lvdpau"

command "-" "Check environment"
  exist /etc/vdpau_wrapper.cfg

command "-" "Check shared libs"
  lib-loaded libvdpau.so.*

command "-" "Check headers"
  lib-header vdpau

command "-" "Check pkg-config"
  lib-config vdpau

command "-" "Check symbols exported by libvdpau.so"
  lib-exported libvdpau.so vdp_device_create_x11

command "gcc -o test_bin {lib_linking_flags} test.c" "Compile binary"
  exit 0
  exist test_bin

+command "./test_bin" "Execute built binary"
  exit 0
